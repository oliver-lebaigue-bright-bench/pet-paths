<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Feedback - Pet Paths</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>
<style>
:root {
    --primary: #4a4fcf;
    --primary-dark: #3a3fb0;
    --bg: #f3f3f3;
    --text: #222;
    --btn-text: #fff;
    --header-bg: #4a4fcf;
    --header-text: #fff;
}
[data-theme="dark"] {
    --primary: #222b45;
    --primary-dark: #151a30;
    --bg: #181a20;
    --text: #f3f3f3;
    --btn-text: #fff;
}
[data-theme="forest"] {
    --primary: #388e3c;
    --primary-dark: #256029;
    --bg: #e8f5e9;
    --text: #1b3a1b;
    --btn-text: #fff;
}
[data-theme="ocean"] {
    --primary: #1976d2;
    --primary-dark: #0d47a1;
    --bg: #e3f2fd;
    --text: #0d223a;
    --btn-text: #fff;
}
[data-theme="rose"] {
    --primary: #d81b60;
    --primary-dark: #880e4f;
    --bg: #fff1f6;
    --text: #3a1b2f;
    --btn-text: #fff;
}

body {
    margin: 0;
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
    background: var(--bg);
    color: var(--text);
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    text-align: center;
}

.container {
    flex: 1;
    padding: 20px;
}

.feedback-card {
    display: flex;
    flex-direction: column;
    gap: 16px;
    padding: 20px;
    border-radius: 16px;
    border: 2px solid var(--primary);
    background: var(--bg);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    max-width: 600px;
    margin: 20px auto;
    position: relative;
    text-align: center;
}

.feedback-card::before,
.feedback-card::after {
    content: "";
    position: absolute;
    width: 16px; height: 16px;
    border: 2px solid var(--primary);
    border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
    opacity: 0.5;
    top: 10px;
    animation: wiggle 2s infinite ease-in-out;
}
.feedback-card::before { left: 10px; }
.feedback-card::after { right: 10px; animation-direction: reverse; }

@keyframes wiggle {
  0%, 100% { transform: rotate(0deg); }
  25% { transform: rotate(5deg); }
  75% { transform: rotate(-5deg); }
}

h2 {
    margin: 0;
    font-size: 1.3rem;
    font-weight: bold;
}

.form-row {
    display: flex;
    flex-direction: column;
    gap: 6px;
    text-align: center;
}

.feedback-card input,
.feedback-card textarea {
    width: calc(100% - 10px);
    max-width: 100%;
    padding: 10px;
    border-radius: 12px;
    border: 1.5px solid #ccc;
    font-size: 1rem;
    resize: none;
    margin: 0 auto;
    display: block;
}

.feedback-card input:focus,
.feedback-card textarea:focus {
    border-color: var(--primary);
    outline: none;
}

.star-rating {
    display: flex;
    flex-direction: row-reverse;
    justify-content: center;
    gap: 6px;
}

.star-rating input { display: none; }
.star-rating label {
    font-size: 1.8rem;
    color: #ccc;
    cursor: pointer;
    transition: color 0.2s;
}
.star-rating input:checked ~ label,
.star-rating label:hover,
.star-rating label:hover ~ label { color: gold; }

.btn-submit {
    padding: 12px 20px;
    border-radius: 25px;
    background: var(--primary);
    color: var(--btn-text);
    border: none;
    font-size: 1rem;
    cursor: pointer;
    display: inline-block;
    margin: 0 auto;
    transition: background-color 0.2s ease;
}

.btn-submit:hover {
    background-color: var(--primary-dark);
}

.footer {
    background-color: var(--primary);
    display: flex;
    justify-content: space-around;
    align-items: flex-end;
    padding: 14px 0 10px;
    position: fixed;
    bottom: 0;
    width: 100%;
    transition: background 0.3s;
    border-radius: 20px 20px 0 0;
    box-shadow: 0 -4px 8px rgba(0,0,0,0.2);
}

.footer a {
    text-decoration: none;
    color: black;
    font-size: 24px;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    flex: 1;
    z-index: 2;
    transition: transform 0.3s ease, font-size 0.3s ease;
}

.footer a.active::before {
    content: "";
    width: 50px;
    height: 50px;
    background-color: var(--primary);
    border-radius: 50%;
    position: absolute;
    top: -25px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 1;
}

.footer a.active i {
    font-size: 30px;
    transform: translateY(-5px);
    z-index: 2;
}
</style>
</head>
<body>
<script>
if (!localStorage.getItem("petpaths_verified")) {
    window.location.href = "verify.html";
}
(function() {
    const theme = localStorage.getItem('petpaths_theme') || 'light';
    document.documentElement.setAttribute('data-theme', theme);
})();
</script>

<div class="container">
  <div class="feedback-card">
    <h2>We value your feedback!</h2>

    <div class="form-row">
      <label for="name">Your Name <span style="color:red">*</span></label>
      <input type="text" id="name" placeholder="Enter your name" required>
    </div>

    <div class="form-row">
      <label for="email">Email <span style="color:red">*</span></label>
      <input type="email" id="email" placeholder="Enter your email" required>
    </div>

    <div class="form-row">
      <label>Overall Rating <span style="color:red">*</span></label>
      <div class="star-rating">
        <input type="radio" id="star5" name="rating" value="5"><label for="star5">&#9733;</label>
        <input type="radio" id="star4" name="rating" value="4"><label for="star4">&#9733;</label>
        <input type="radio" id="star3" name="rating" value="3"><label for="star3">&#9733;</label>
        <input type="radio" id="star2" name="rating" value="2"><label for="star2">&#9733;</label>
        <input type="radio" id="star1" name="rating" value="1"><label for="star1">&#9733;</label>
      </div>
    </div>

    <div class="form-row">
      <label for="walkExperience">Your Walk Experience</label>
      <textarea id="walkExperience" rows="3" placeholder="Describe your recent dog walk..." required></textarea>
    </div>

    <div class="form-row">
      <label for="improvements">Suggestions / Improvements</label>
      <textarea id="improvements" rows="3" placeholder="What can we improve?" required></textarea>
    </div>

    <div class="form-row">
      <button class="btn-submit" onclick="submitFeedback()">Submit Feedback</button>
    </div>
  </div>
</div>

<div class="footer">
    <a href="/settings.html"><i class="fa-solid fa-gear"></i></a>
    <a href="/playdates.html"><i class="fa-solid fa-calendar"></i></a>
    <a href="/walks.html"><i class="fa-solid fa-dog"></i></a>
    <a href="/index.html"><i class="fa-solid fa-house"></i></a>
    <a href="/pet-net/index.html"><i class="fa-solid fa-globe"></i></a>
    <a href="/profiles.html"><i class="fa-solid fa-user"></i></a>
    <a href="/feedback.html" class="active"><i class="fa-solid fa-clipboard-list"></i></a>
    <a href="/admin-space/admin.html" id="adminLink" style="display:none;"><i class="fa-solid fa-user-shield"></i></a>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyCMuOymY5KniYJgg51vkhcYWxXeyXAyFk0",
  authDomain: "pet-paths.firebaseapp.com",
  databaseURL: "https://pet-paths-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "pet-paths",
  storageBucket: "pet-paths.firebasestorage.app",
  messagingSenderId: "5202022310",
  appId: "1:5202022310:web:55991fbd2be58294bfc967"
};
const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

window.submitFeedback = () => {
  const data = {
    name: document.getElementById("name").value,
    email: document.getElementById("email").value,
    rating: document.querySelector('input[name="rating"]:checked')?.value || 0,
    walkExperience: document.getElementById("walkExperience").value,
    improvements: document.getElementById("improvements").value,
    timestamp: Date.now()
  };
  push(ref(db, 'feedback/'), data).then(() => alert("Thanks for your feedback!"));
};
</script>
</body>
</html>